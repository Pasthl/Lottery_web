<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <!-- å¼•å…¥è‡ªå®šä¹‰æ ·å¼ -->
    <link rel="stylesheet" href="/css/dashboard.css">
    <style>
        .winner-section {
            text-align: center;
            padding: 30px 0;
            position: relative;
            z-index: 1; /* ç¡®ä¿å†…å®¹åœ¨å½©å¸¦ä¸Šæ–¹ */
        }
        
        .winner-title {
            color: #ff6f00;
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .winner-card {
            background-color: #fff9c4;
            border: 2px solid #ffd54f;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        }
        
        .winner-info {
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        .winner-image {
            max-width: 100%;
            height: auto;
            max-height: 400px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 20px;
        }
        
        .confetti {
            position: fixed; /* æ”¹ä¸ºfixedè€Œä¸æ˜¯absoluteï¼Œç¡®ä¿ç›¸å¯¹äºè§†å£å®šä½ */
            width: 10px;
            height: 10px;
            background-color: #f00;
            top: -20px; /* ä»è§†å£é¡¶éƒ¨ä»¥ä¸Šå¼€å§‹ï¼Œç¡®ä¿å®ƒä»¬"é£˜å…¥"è§†å›¾ */
            animation: fall 8s linear infinite; /* å¢åŠ åŠ¨ç”»æ—¶é—´ä½¿å…¶è¦†ç›–æ›´å¤šåŒºåŸŸ */
            z-index: 0; /* ç¡®ä¿å½©å¸¦åœ¨å†…å®¹ä¸‹æ–¹ */
            pointer-events: none; /* ç¡®ä¿å½©å¸¦ä¸ä¼šé˜»æ­¢ç‚¹å‡»é¡µé¢ä¸Šçš„å…ƒç´  */
        }
        
        @keyframes fall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg); /* ä½¿ç”¨100vhç¡®ä¿è¦†ç›–æ•´ä¸ªè§†å£é«˜åº¦ */
                opacity: 0;
            }
        }
        
        .actions {
            margin-top: 30px;
        }

        /* ç¡®ä¿å¡ç‰‡å’ŒæŒ‰é’®åœ¨å½©å¸¦ä¸Šæ–¹ */
        .card, .btn {
            position: relative;
            z-index: 2;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <header class="dashboard-header">
            <h1>æŠ½å¥–ç®¡ç†ç³»ç»Ÿ</h1>
            <div class="user-info">
                <a href="/admin/dashboard" class="btn btn-success" style="margin-right: 10px;">è¿”å›ä»ªè¡¨ç›˜</a>
                <a href="/admin/logout" class="logout-btn">é€€å‡ºç™»å½•</a>
            </div>
        </header>

        <!-- ä¸­å¥–ç»“æœæ˜¾ç¤º -->
        <div class="card winner-section">
            <h2 class="winner-title">ğŸ‰ æ­å–œï¼ä¸­å¥–è€…å·²äº§ç”Ÿ ğŸ‰</h2>
            
            <div class="winner-card">
                <div class="winner-info">
                    <p><strong>æŠ½å¥–æ´»åŠ¨ï¼š</strong><%= lottery ? lottery.title : 'æœªçŸ¥æ´»åŠ¨' %></p>
                    <p><strong>ä¸­å¥–è€…IDï¼š</strong><%= winner.participantId %></p>
                    <p><strong>æäº¤æ—¶é—´ï¼š</strong><%= new Date(winner.createdAt).toLocaleString() %></p>
                    <p><strong>å¼€å¥–æ—¶é—´ï¼š</strong><%= new Date(winner.drawnAt).toLocaleString() %></p>
                </div>
                
                <div>
                    <h3>ä¸­å¥–è€…æˆªå›¾ï¼š</h3>
                    <img src="<%= winner.screenshot %>" alt="ä¸­å¥–è€…æˆªå›¾" class="winner-image">
                </div>
            </div>
            
            <div class="actions">
                <a href="/admin/dashboard" class="btn btn-primary">è¿”å›ç®¡ç†é¢æ¿</a>
                <a href="/" class="btn btn-success">æŸ¥çœ‹é¦–é¡µ</a>
            </div>
        </div>
    </div>
    
    <!-- å½©å¸¦æ•ˆæœçš„è„šæœ¬ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // åˆ›å»º100ä¸ªå½©å¸¦ï¼Œå¢åŠ æ•°é‡ä»¥è¦†ç›–æ›´å¤§åŒºåŸŸ
            for (let i = 0; i < 100; i++) {
                createConfetti();
            }
            
            // æ¯éš”ä¸€æ®µæ—¶é—´ç»§ç»­åˆ›å»ºæ–°å½©å¸¦ï¼Œä¿æŒæ•ˆæœæŒç»­
            setInterval(() => {
                createConfetti();
            }, 300);
            
            function createConfetti() {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                // éšæœºæ°´å¹³ä½ç½®
                confetti.style.left = Math.random() * 100 + 'vw';
                
                // éšæœºé¢œè‰² - ä½¿ç”¨æ›´å¤šé²œè‰³çš„é¢œè‰²
                const colors = ['#f94144', '#f3722c', '#f8961e', '#f9c74f', '#90be6d', '#43aa8b', '#577590', '#ff0080', '#7400b8', '#4cc9f0'];
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // éšæœºå½¢çŠ¶ - æ–¹å½¢ã€åœ†å½¢æˆ–ä¸‰è§’å½¢
                const shapes = ['square', 'circle', 'triangle'];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                
                if (shape === 'circle') {
                    confetti.style.borderRadius = '50%';
                } else if (shape === 'triangle') {
                    confetti.style.width = '0';
                    confetti.style.height = '0';
                    confetti.style.backgroundColor = 'transparent';
                    confetti.style.borderLeft = '5px solid transparent';
                    confetti.style.borderRight = '5px solid transparent';
                    confetti.style.borderBottom = '10px solid ' + colors[Math.floor(Math.random() * colors.length)];
                }
                
                // éšæœºå¤§å°
                const size = Math.random() * 10 + 5;
                confetti.style.width = size + 'px';
                confetti.style.height = size + 'px';
                
                // éšæœºæ—‹è½¬
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                // éšæœºåŠ¨ç”»æŒç»­æ—¶é—´
                const duration = Math.random() * 5 + 3;
                confetti.style.animationDuration = duration + 's';
                
                // éšæœºåŠ¨ç”»å»¶è¿Ÿ
                confetti.style.animationDelay = Math.random() * 2 + 's';
                
                document.body.appendChild(confetti);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ ä»¥é¿å…DOMè¿‡è½½
                setTimeout(() => {
                    confetti.remove();
                }, (duration + 2) * 1000); // åŠ¨ç”»æ—¶é—´+å»¶è¿Ÿ+ç¼“å†²
            }
        });
    </script>
</body>
</html>